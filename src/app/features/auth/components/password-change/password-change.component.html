<div class="container mt-5" style="max-width: 500px;">
  <h2 class="mb-4">パスワード変更</h2>

  <div class="alert alert-warning mb-3">
    セキュリティ向上のためパスワード変更をお願いします。
  </div>

  <form (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label class="form-label">新しいパスワード</label>

      <!-- 条件表示 -->
      <div class="form-text mb-2">
        9～16文字で、英大文字・英小文字・数字・記号を含めてください。
      </div>

      <!-- パスワード入力 + 表示切替 -->
      <div class="input-group">
        <input
          [type]="showPassword ? 'text' : 'password'"
          class="form-control"
          [(ngModel)]="password"
          maxlength="16"
          name="password"
          required
          inputmode="latin"
          autocomplete="new-password"
          style="ime-mode: disabled"
          (input)="sanitizePassword($event)"
          (ngModelChange)="checkPasswordStrength($event)"
        />

        <button
          type="button"
          class="btn btn-outline-secondary"
          (click)="togglePassword()"
          tabindex="-1"
        >
          <i
            class="bi"
            [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"
          ></i>
        </button>
      </div>

      <!-- 強度表示 -->
      <div *ngIf="passwordStrength" class="mt-2">
        <small [ngClass]="passwordStrengthClass" class="fw-bold">
          {{ passwordStrength }}
        </small>
      </div>
    </div>

    <div class="text-danger mb-3" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <button
      class="btn btn-primary w-100"
      type="submit"
      [disabled]="passwordStrengthClass !== 'text-success'"
    >
      変更する
    </button>
  </form>
</div>